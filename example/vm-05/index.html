<html>
  <head>
    <title>Vera Molnar 01</title>
    <style>
      body {
        width: 100vw;
        height: 100vh;
        font-family: Helvetica,  Arial, sans-serif;
        background-color: white;
        color: black;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
      canvas {
        border: 1px solid black;
      }
    </style>
  </head>
  <body>
    Vera Molnar 01
    <canvas width="500" height="500"></canvas>
  </body>
  <script>

    // Find a place we can draw:
    var canvas = document.querySelector('canvas');
    var context = canvas.getContext('2d');

    // Variables:
    var gridSize = 1;
    var marginScale = 0.9;
    var numColumns = 5;

    var setgridSize = function(newNumColumns){
      if (newNumColumns) {
        numColumns = newNumColumns;
      }
      if (canvas.width > canvas.height) {
        gridSize = canvas.height / numColumns;
      }
      else {
        gridSize = canvas.width / numColumns;
      }
    }

    var adjustMargins = function () {
      var size = gridSize * numColumns;
      var extraSpaceX = canvas.width - size;
      var extraSpaceY = canvas.height - size;
      context.translate(extraSpaceX/2, extraSpaceY/2);
    }

    var handleResize = function () {
      var {width: w, height: h}  = canvas.getBoundingClientRect();
      canvas.width = w;
      canvas.height = h;
      draw();
    }

    window.addEventListener("resize", handleResize);

    var drawSquare = function(x, y) {
      context.save();
      var halfGrid = gridSize / 2;
      var startX = - halfGrid;
      var startY = - halfGrid;
      var endX = halfGrid;
      var endY = halfGrid;

      context.beginPath();

      context.moveTo(startX, startY);
      context.lineTo(endX,   startY);
      context.lineTo(endX,   endY) ;
      context.lineTo(startX, endY) ;

      context.closePath();
      context.stroke();
      context.restore()
    }

    // Align drawing to our grid
    var drawInGrid = function(gridX, gridY, drawingFunction) {
      var halfGrid = gridSize / 2;
      context.save();
      context.translate(gridX * gridSize + halfGrid, gridY * gridSize + halfGrid);
      context.scale(marginScale, marginScale);
      drawingFunction(gridX, gridY);
      context.restore();
    }

    // draw hella squares:
    var draw = function() {
      setgridSize();
      adjustMargins();
      context.save();
      var x, y;
      for(x=0; x < numColumns; x++) {
        for(y=0; y < numColumns; y++) {
          drawInGrid(x, y, drawSquare);
        }
      }
      context.restore();
    }

    draw();

  </script>
</html>